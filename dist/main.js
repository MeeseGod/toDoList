(()=>{"use strict";let e=[{projectName:"Test Project",dueDate:new Date(2021,12,12),tasks:[],description:"[Description]"}];const t=(()=>{let t="",n="";class r{constructor(e,t,n,r){this.projectName=e,this.dueDate=t,this.tasks=n,this.description=r}}class o{constructor(e,t){this.taskName=e,this.dueDate=t}}return{getActiveProject:()=>t,getProjects:()=>e,setProjectActive:n=>{t!=e[n]&&(t=e[n]),""==n&&(t=""),console.log(t)},setFormTarget:e=>{document.getElementById("projectForm")||document.getElementById("taskForm")||(n!=e&&(n=e),console.log("Form target: "+n))},checkInputValues:(n,d,c)=>""!=d&&""!=n?("projectForm"==c?((t,n)=>{let o=new r(t,new Date(n),[],"[Description]");e.push(o),console.log(e)})(n,d):"taskForm"==c&&((e,n)=>{let r=new o(e,new Date(n));t.tasks.push(r),console.log(t.tasks)})(n,d),!0):(""==n?alert("Error - Invalid Project Name"):""==d&&alert("Error - Invalid Due Date"),!1)}})(),n={displayProjects:()=>{const e=document.getElementById("projects");e.innerHTML="";for(let n=0;n<t.getProjects().length;n++){let r=document.createElement("div");r.setAttribute("id",`displayedProject${n}`),r.setAttribute("class","displayedProjects");let o=document.createElement("p");o.textContent=t.getProjects()[n].projectName,r.appendChild(o),e.appendChild(r)}console.log(t.getProjects())},displayCurrentProject:e=>{(e=>{if(document.getElementById("taskContainer").innerHTML="",""!=e){let n=document.createElement("div"),r=document.createElement("p"),o=document.createElement("hr");if(n.setAttribute("id","projectDescriptionDiv"),r.textContent=t.getActiveProject().description,r.setAttribute("id","projectDescriptionText"),o.setAttribute("id","taskHr"),document.getElementById("taskContainer").appendChild(n),document.getElementById("taskContainer").appendChild(o),document.getElementById("projectDescriptionDiv").appendChild(r),0==e.tasks.length){let e=document.createElement("div");e.setAttribute("id","taskDiv$"),e.setAttribute("class","taskDiv");let t=document.createElement("p");t.textContent="This project has no tasks",document.getElementById("taskContainer").appendChild(e),e.appendChild(t)}else if(e.tasks.length>0)for(let t=0;t<e.tasks.length;t++){let n=document.createElement("div");n.setAttribute("id",`taskDiv${t}`),n.setAttribute("class","taskDiv");let r=document.createElement("p");r.textContent=e.tasks[t].taskName,document.getElementById("taskContainer").appendChild(n),n.appendChild(r)}}})(e)},createFormContainer:e=>{if(document.getElementById("projectForm")||document.getElementById("taskForm"))console.log("Form exists");else{let t=document.createElement("div");t.setAttribute("id",`${e}Form`),document.body.appendChild(t),(e=>{if("project"==e){let e=document.createElement("h1"),t=document.createElement("input"),n=document.createElement("input");e.textContent="Create a Project",e.setAttribute("id","projectFormTitle"),e.setAttribute("class","formTitle"),t.setAttribute("type","text"),t.setAttribute("id","projectNameInput"),t.setAttribute("class","formInput"),n.setAttribute("type","date"),n.setAttribute("id","projectDateInput"),n.setAttribute("class","formInput"),document.getElementById("projectForm").appendChild(e),document.getElementById("projectForm").appendChild(t),document.getElementById("projectForm").appendChild(n)}else if("task"==e){let e=document.createElement("h1"),t=document.createElement("input"),n=document.createElement("input");e.textContent="Create a Project",e.setAttribute("id","taskFormTitle"),e.setAttribute("class","formTitle"),t.setAttribute("id","taskNameInput"),t.setAttribute("class","formInput"),n.setAttribute("type","date"),n.setAttribute("id","taskDateInput"),n.setAttribute("class","formInput"),document.getElementById("taskForm").appendChild(e),document.getElementById("taskForm").appendChild(t),document.getElementById("taskForm").appendChild(n)}const t=document.createElement("button");t.setAttribute("id","submitForm"),t.innerText="Submit",document.getElementById(`${e}Form`).appendChild(t);const n=document.createElement("button");n.setAttribute("id","closeForm"),n.innerText="Cancel",document.getElementById(`${e}Form`).appendChild(n)})(e)}},removeTaskForm:()=>{document.getElementById("taskForm").remove()}};t.checkInputValues("Created Test Project",new Date(2021,1,1),"projectForm"),n.displayProjects(),document.getElementById("addProject").addEventListener("click",(function(){console.log("Bringing up project creation form"),t.setFormTarget("project"),n.createFormContainer("project")})),document.getElementById("addTask").addEventListener("click",(function(){console.log("Bringing up task creation form"),t.setFormTarget("task"),n.createFormContainer("task")})),document.addEventListener("click",(function(e){if("displayedProjects"==e.target.parentNode.className){let r=e.target.parentNode.id.replace("displayedProject","");t.setProjectActive(r),n.displayCurrentProject(t.getActiveProject()),document.getElementById("addTask").style.visibility="visible",document.getElementById("taskForm")&&n.removeTaskForm()}"projects"!=e.target.id&&"projectsContainer"!=e.target.id||(t.setProjectActive(""),n.displayCurrentProject(t.getActiveProject()),document.getElementById("addTask").style.visibility="hidden",document.getElementById("taskForm")&&n.removeTaskForm())})),document.addEventListener("click",(function(e){"closeForm"==e.target.id&&(document.getElementById(e.target.parentNode.id).remove(),t.setFormTarget(""))})),document.addEventListener("click",(function(e){if("submitForm"==e.target.id){let r=document.getElementsByClassName("formInput");1==t.checkInputValues(r[0].value,r[1].value,r[0].parentElement.id)&&(document.getElementById(e.target.parentNode.id),document.getElementById(e.target.parentNode.id).remove(),t.setFormTarget(""),console.log(e.target.parentNode.id),"projectForm"==e.target.parentNode.id?n.displayProjects():"taskForm"==e.target.parentNode.id&&n.displayCurrentProject(t.getActiveProject()))}}))})();