(()=>{"use strict";let e=[{projectName:"Test Project",dueDate:new Date(2021,12,12),tasks:[],description:"[Description]"}];const t=(()=>{let n="",r="";class o{constructor(e,t,n,r){this.projectName=e,this.dueDate=t,this.tasks=n,this.description=r}}class i{constructor(e,t){this.taskName=e,this.dueDate=t}}return{getActiveProject:()=>n,getProjects:()=>e,setProjectActive:t=>{n!=e[t]&&(n=e[t]),""==t&&(n=""),console.log(n)},setFormTarget:e=>{document.getElementById("projectForm")||document.getElementById("taskForm")||(r!=e&&(r=e),console.log("Form target: "+r))},checkInputValues:(r,d,c)=>{if(""!=d&&""!=r){if("projectForm"==c)((t,n)=>{let r=new o(t,new Date(n),[],"[Description]");e.push(r),console.log(e)})(r,d);else if("taskForm"==c){if(new Date(d)<new Date(t.getActiveProject().dueDate))return alert("Error - Task Due before Project"),!1;((e,t)=>{let r=new i(e,new Date(t));n.tasks.push(r),console.log(n.tasks)})(r,d)}return!0}return""==r?alert("Error - Invalid Project Name"):""==d&&alert("Error - Invalid Due Date"),!1}}})(),n=t,r={displayProjects:()=>{const e=document.getElementById("projects");e.innerHTML="";for(let t=0;t<n.getProjects().length;t++){let r=document.createElement("div");r.setAttribute("id",`displayedProject${t}`),r.setAttribute("class","displayedProjects");let o=document.createElement("p");o.textContent=n.getProjects()[t].projectName,r.appendChild(o),e.appendChild(r)}console.log(n.getProjects())},displayCurrentProject:e=>{(e=>{if(document.getElementById("taskContainer").innerHTML="",""!=e){let t=document.createElement("div"),r=document.createElement("p"),o=document.createElement("hr");if(t.setAttribute("id","projectDescriptionDiv"),r.textContent=n.getActiveProject().description,r.setAttribute("id","projectDescriptionText"),o.setAttribute("id","taskHr"),document.getElementById("taskContainer").appendChild(t),document.getElementById("taskContainer").appendChild(o),document.getElementById("projectDescriptionDiv").appendChild(r),0==e.tasks.length){let e=document.createElement("div");e.setAttribute("id","noTaskDiv"),e.setAttribute("class","taskDiv");let t=document.createElement("p");t.textContent="This project has no tasks",document.getElementById("taskContainer").appendChild(e),e.appendChild(t)}else if(e.tasks.length>0)for(let t=0;t<e.tasks.length;t++){let n=document.createElement("div");n.setAttribute("id",`taskDiv${t}`),n.setAttribute("class","taskDiv");let r=document.createElement("p");r.textContent=e.tasks[t].taskName,document.getElementById("taskContainer").appendChild(n),n.appendChild(r)}}})(e)},createFormContainer:e=>{if(document.getElementById("projectForm")||document.getElementById("taskForm"))console.log("Form exists");else{let t=document.createElement("div");t.setAttribute("id",`${e}Form`),document.body.appendChild(t),(e=>{if("project"==e){let e=document.createElement("h1"),t=document.createElement("input"),n=document.createElement("input");e.textContent="Create a Project",e.setAttribute("id","projectFormTitle"),e.setAttribute("class","formTitle"),t.setAttribute("type","text"),t.setAttribute("id","projectNameInput"),t.setAttribute("class","formInput"),n.setAttribute("type","date"),n.setAttribute("id","projectDateInput"),n.setAttribute("class","formInput"),document.getElementById("projectForm").appendChild(e),document.getElementById("projectForm").appendChild(t),document.getElementById("projectForm").appendChild(n)}else if("task"==e){let e=document.createElement("h1"),t=document.createElement("input"),n=document.createElement("input");e.textContent="Create a Project",e.setAttribute("id","taskFormTitle"),e.setAttribute("class","formTitle"),t.setAttribute("id","taskNameInput"),t.setAttribute("class","formInput"),n.setAttribute("type","date"),n.setAttribute("id","taskDateInput"),n.setAttribute("class","formInput"),document.getElementById("taskForm").appendChild(e),document.getElementById("taskForm").appendChild(t),document.getElementById("taskForm").appendChild(n)}const t=document.createElement("button");t.setAttribute("id","submitForm"),t.innerText="Submit",document.getElementById(`${e}Form`).appendChild(t);const n=document.createElement("button");n.setAttribute("id","closeForm"),n.innerText="Cancel",document.getElementById(`${e}Form`).appendChild(n)})(e)}},removeTaskForm:()=>{document.getElementById("taskForm").remove()},descriptionForm:()=>{if(!document.getElementById("descriptionFormContainer")){let e=document.createElement("div"),t=document.createElement("textarea"),n=document.createElement("button"),r=document.createElement("button");e.setAttribute("id","descriptionFormContainer"),t.setAttribute("id","descriptionTextArea"),n.setAttribute("id","descriptionSubmit"),r.setAttribute("id","descriptionCancel"),document.body.append(e),document.getElementById("descriptionFormContainer").appendChild(t),document.getElementById("descriptionFormContainer").appendChild(n),document.getElementById("descriptionFormContainer").appendChild(r)}}};n.checkInputValues("Created Test Project",new Date(2021,1,1),"projectForm"),r.displayProjects(),document.getElementById("addProject").addEventListener("click",(function(){console.log("Bringing up project creation form"),n.setFormTarget("project"),r.createFormContainer("project")})),document.getElementById("addTask").addEventListener("click",(function(){console.log("Bringing up task creation form"),n.setFormTarget("task"),r.createFormContainer("task")})),document.addEventListener("click",(function(e){if("displayedProjects"==e.target.parentNode.className){let t=e.target.parentNode.id.replace("displayedProject","");n.setProjectActive(t),r.displayCurrentProject(n.getActiveProject()),document.getElementById("addTask").style.visibility="visible",document.getElementById("taskForm")&&r.removeTaskForm()}"projects"!=e.target.id&&"projectsContainer"!=e.target.id||(n.setProjectActive(""),r.displayCurrentProject(n.getActiveProject()),document.getElementById("addTask").style.visibility="hidden",document.getElementById("taskForm")&&r.removeTaskForm())})),document.addEventListener("click",(function(e){"closeForm"==e.target.id&&(document.getElementById(e.target.parentNode.id).remove(),n.setFormTarget(""))})),document.addEventListener("click",(function(e){if("submitForm"==e.target.id){let t=document.getElementsByClassName("formInput");1==n.checkInputValues(t[0].value,t[1].value,t[0].parentElement.id)&&(document.getElementById(e.target.parentNode.id),document.getElementById(e.target.parentNode.id).remove(),n.setFormTarget(""),console.log(e.target.parentNode.id),"projectForm"==e.target.parentNode.id?r.displayProjects():"taskForm"==e.target.parentNode.id&&r.displayCurrentProject(n.getActiveProject()))}})),document.addEventListener("click",(function(e){"projectDescriptionDiv"!=e.target.id&&"projectDescriptionText"!=e.target.id||(console.log("Project Desc"),console.log(n.getActiveProject()),r.descriptionForm())}))})();